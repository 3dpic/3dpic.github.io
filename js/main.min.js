var btnbrony=document.getElementById("btnbrony");var blockLoad=document.getElementById("loading");var blockLoadProgress=document.getElementById("blockloading_progress");var btnPlay=document.getElementById("btnPlay");var btnfullscrn=document.getElementById("btnfullscrn");var rotateObj=document.getElementById("rotateObj");var cameraReset=document.getElementById("cameraReset");
function toggleFullScreen(){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement)if(document.documentElement.requestFullscreen)document.documentElement.requestFullscreen();else if(document.documentElement.mozRequestFullScreen)document.documentElement.mozRequestFullScreen();else{if(document.documentElement.webkitRequestFullscreen)document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}else if(document.cancelFullScreen)document.cancelFullScreen();
else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitCancelFullScreen)document.webkitCancelFullScreen()}var easeInOutExpo=function(t,koef){var sigma0=1/(1+Math.exp(koef*.5));var sigma=1/(1+Math.exp(koef*(-t+.5)));return(sigma-sigma0)/(1-2*sigma0)};var easeInExpo=function(t,koef){if(koef>5)return Math.exp(koef*(t-1));var sigma0=Math.exp(-koef);return(Math.exp(koef*(t-1))-sigma0)/(1-sigma0)};
var easeInCirc=function(t){if(t>=1)return t;return-1*(Math.sqrt(1-t*t)-1)};var easeOutCubic=function(t){return--t*t*t+1};var easeOutCirc=function(t){return 1*Math.sqrt(1-(t=t-1)*t)};var easeOutQuint=function(t){return 1+--t*t*t*t*t};var easeOutElastic=function(t){var s=1.70158;var p=0;var a=1;if(t==0)return 0;if(t==1)return 1;if(p==0)p=1*.3;if(a<1){a=.5;var s$0=p/4}else s=p/(2*Math.PI)*Math.asin(1/a);return a*Math.pow(2,-10*t)*Math.sin((t*1-s)*(2*Math.PI)/p)+1};
var easeOutBounce=function(t){if(t<1/2.75)return 1*(7.5625*t*t);else if(t<2/2.75)return 1*(7.5625*(t=t-1.5/2.75)*t+.75);else if(t<2.5/2.75)return 1*(7.5625*(t=t-2.25/2.75)*t+.9375);else return 1*(7.5625*(t=t-2.625/2.75)*t+.984375)};var easeInQuint=function(t){return t*t*t*t*t};var easeInOutCirc=function(t){if((t=t/.5)<1)return-1/2*(Math.sqrt(1-t*t)-1);return 1/2*(Math.sqrt(1-(t=t-2)*t)+1)};
var globalCameraPos=function(cameraPosSetup){var vectorCam=new THREE.Vector3(0,0,1);var axisY=new THREE.Vector3(0,1,0);var axisX=new THREE.Vector3(1,0,0);vectorCam.applyAxisAngle(axisX,THREE.Math.degToRad(cameraPosSetup.angelPlaneXZ)).normalize();vectorCam.applyAxisAngle(axisY,THREE.Math.degToRad(cameraPosSetup.angelOy)).normalize();camera.position.addVectors(cameraPosSetup.camLookAt,vectorCam.multiplyScalar(cameraPosSetup.distance));controls.target.x=cameraPosSetup.camLookAt.x;controls.target.y=
cameraPosSetup.camLookAt.y;controls.target.z=cameraPosSetup.camLookAt.z;controls.autoRotateSpeed=cameraPosSetup.autoRotSpeed};var CameraKeyTrckDefPos={playOn:false,loop:false,timeScale:1,times:[0,60],pause:[0,0],camLookAtx:[0,-25],camLookAty:[0,-80],camLookAtz:[0,0],distance:[0,4500],angelPlaneXZ:[0,-20],angelOy:[0,320],autoRotSpeed:[-3]};
var CameraKeyTrckFrontPos={playOn:false,loop:false,timeScale:1,times:[0,40],pause:[0,0],camLookAtx:[0,0],camLookAty:[0,-100],camLookAtz:[0,0],distance:[0,4E3],angelPlaneXZ:[0,0],angelOy:[0,0],autoRotSpeed:[-3]};
var CameraKeyTrckAllPos={playOn:false,loop:false,timeScale:1,times:[0,50,100,150,200,250,300,350],pause:[240,240,240,240,240,240,240,240],camLookAtx:[0,0,0,0,0,0,0,-25],camLookAty:[0,-100,-100,-200,-100,+50,-100,-80],camLookAtz:[0,0,0,0,0,0,0,0],distance:[0,4E3,4500,4E3,4E3,4E3,4E3,4500],angelPlaneXZ:[0,0,0,40,-40,0,0,-20],angelOy:[0,0,-90,0,0,90,180,320],divID:"#textblock1",divColor:"#BF360C",divFontSize:"1.7vmax",divLeft:[45,6,45,45,58,15,50],divTop:[55,55,60,60,60,55,60],textIDResource:["#ust1_1LevellInfo1",
"#ust1_1LevellInfo2","#ust1_1LevellInfo3","#ust1_1LevellInfo4","#ust1_1LevellInfo5","#ust1_1LevellInfo6","#ust1_1LevellInfo7"],autoRotSpeed:[-3]};
var CameraKeyTrck1={playOn:false,loop:false,timeScale:1,times:[0,50,100,150,200,250,300,350,400,450,500,550,600],pause:[240,240,240,240,240,240,240,240,240,240,240,0,0,0],camLookAtx:[0,-1186,-1238,-444,-339,-128,241,847,869,777,-689,-711,0],camLookAty:[0,474,524,648,398,507,586,632,611,345,-745,-1122,-100],camLookAtz:[0,-141,95,72,113,182,138,15,81,138,54,241,0],distance:[0,1426,1433,807,807,1120,1433,908,1070,908,871,605,4E3],angelPlaneXZ:[0,0,0,0,0,0,-39,0,0,0,-36,45,0],angelOy:[0,-41,50,-22,-22,
0,10,-7,49,37,37,10,0],autoRotSpeed:[-3],divID:"#textblock1",divColor:"#6A1B9A",divFontSize:"2.5vmax",divLeft:[10,10,10,10,10,10,10,10,10,10,10,10,10,10],divTop:[30,30,30,30,30,30,30,30,30,30,30,30,30,30],textIDResource:["#ust1_component1","#ust1_component3","#ust1_component4","#ust1_component5","#ust1_component6","#ust1_component7","#ust1_component8","#ust1_component9","#ust1_component10","#ust1_component11","#ust1_component12"]};
function calcOYangel(vectorCamera){var axisX=new THREE.Vector3(-1,0,0);vectorCamera.y=0;if(vectorCamera.x>0&&vectorCamera.z>0)return THREE.Math.radToDeg(vectorCamera.angleTo(axisX))-90;if(vectorCamera.x>0&&vectorCamera.z<0)return 90+90-(THREE.Math.radToDeg(vectorCamera.angleTo(axisX))-90);if(vectorCamera.x<0&&vectorCamera.z<0)return 180-(THREE.Math.radToDeg(vectorCamera.angleTo(axisX))-90);if(vectorCamera.x<0&&vectorCamera.z>0)return 270+90+(THREE.Math.radToDeg(vectorCamera.angleTo(axisX))-90);return 0}
function animateCamera(){var currentKey=0;var localTime=0;var cameraPosSetup={camLookAt:new THREE.Vector3(0,0,0),distance:0,angelPlaneXZ:0,angelOy:0,autoRotSpeed:0};var deltaT=0;var sigma;var delayShowText=900;return function(keyTrack){if(!keyTrack.playOn){currentKey=0;localTime=0;if(keyTrack.divID)$(keyTrack.divID).hide().empty();plyRed.style.display="none";return}if(keyTrack.playOn){if(currentKey==0&&localTime==0){console.log("%cAnim begin...","color: green;");var vectorCam=new THREE.Vector3(0,
0,0);var axisY=new THREE.Vector3(0,1,0);var axisZ=new THREE.Vector3(-1,0,0);keyTrack.camLookAtx[0]=controls.target.x;keyTrack.camLookAty[0]=controls.target.y;keyTrack.camLookAtz[0]=controls.target.z;keyTrack.distance[0]=camera.position.distanceTo(controls.target);vectorCam.subVectors(camera.position,controls.target);keyTrack.angelPlaneXZ[0]=THREE.Math.radToDeg(vectorCam.angleTo(axisY))-90;keyTrack.angelOy[0]=calcOYangel(vectorCam);keyTrack.autoRotSpeed[0]=controls.autoRotateSpeed;if(keyTrack.textIDResource!=
null){$(keyTrack.divID).hide().empty();$(keyTrack.divID).css("top",function(index,value){var newTop=keyTrack.divTop[0]+"%";return newTop});$(keyTrack.divID).css("left",function(index,value){var newTop=keyTrack.divLeft[0]+"%";return newTop});$(keyTrack.divID).css("background-color",keyTrack.divColor);$(keyTrack.divID).css("font-size",keyTrack.divFontSize);$(keyTrack.divID).text($(keyTrack.textIDResource[currentKey]).text());$(keyTrack.divID).delay(delayShowText).fadeIn(600).delay(keyTrack.pause[currentKey]*
100/6-delayShowText-0).fadeOut(300)}deltaT=(keyTrack.times[currentKey+1]-keyTrack.times[currentKey])*keyTrack.timeScale}if(localTime<deltaT+1){if(deltaT>0)sigma=easeOutCubic(localTime/deltaT);else{console.log("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 deltaT \u0432 animateCamera()");sigma=1}cameraPosSetup.camLookAt.x=keyTrack.camLookAtx[currentKey]+(keyTrack.camLookAtx[currentKey+1]-keyTrack.camLookAtx[currentKey])*sigma;cameraPosSetup.camLookAt.y=keyTrack.camLookAty[currentKey]+
(keyTrack.camLookAty[currentKey+1]-keyTrack.camLookAty[currentKey])*sigma;cameraPosSetup.camLookAt.z=keyTrack.camLookAtz[currentKey]+(keyTrack.camLookAtz[currentKey+1]-keyTrack.camLookAtz[currentKey])*sigma;cameraPosSetup.distance=keyTrack.distance[currentKey]+(keyTrack.distance[currentKey+1]-keyTrack.distance[currentKey])*sigma;cameraPosSetup.angelOy=keyTrack.angelOy[currentKey]+(keyTrack.angelOy[currentKey+1]-keyTrack.angelOy[currentKey])*sigma;cameraPosSetup.angelPlaneXZ=keyTrack.angelPlaneXZ[currentKey]+
(keyTrack.angelPlaneXZ[currentKey+1]-keyTrack.angelPlaneXZ[currentKey])*sigma;cameraPosSetup.autoRotSpeed=keyTrack.autoRotSpeed[0];globalCameraPos(cameraPosSetup)}localTime++;if(localTime>deltaT+keyTrack.pause[currentKey]){localTime=0;console.log(currentKey);$(keyTrack.divID).hide().empty();currentKey++;deltaT=(keyTrack.times[currentKey+1]-keyTrack.times[currentKey])*keyTrack.timeScale;if(keyTrack.textIDResource!=null){$(keyTrack.divID).css("top",function(index,value){var newTop=keyTrack.divTop[currentKey]+
"%";return newTop});$(keyTrack.divID).css("left",function(index,value){var newTop=keyTrack.divLeft[currentKey]+"%";return newTop});$(keyTrack.divID).hide().empty();$(keyTrack.divID).html($(keyTrack.textIDResource[currentKey]).html());$(keyTrack.divID).delay(delayShowText).fadeIn(600).delay(keyTrack.pause[currentKey]*100/6-delayShowText-0).fadeOut(300)}if(currentKey>keyTrack.times.length-2){if(!keyTrack.loop)keyTrack.playOn=false;currentKey=0;console.log("%c...anim complete","color: red;");localTime=
0;if(keyTrack.divID)$(keyTrack.divID).hide().empty();plyRed.style.display="none"}}}}}
function showCameraParam(){var vectorCam=new THREE.Vector3(0,0,0);var axisY=new THREE.Vector3(0,1,0);var axisZ=new THREE.Vector3(-1,0,0);var angelOy=0;var camLookAtx=controls.target.x;var camLookAty=controls.target.y;var camLookAtz=controls.target.z;var distance=camera.position.distanceTo(controls.target);vectorCam.subVectors(camera.position,controls.target);var angelPlaneXZ=THREE.Math.radToDeg(vectorCam.angleTo(axisY))-90;angelOy=calcOYangel(vectorCam);console.log("CamX=%d CamY=%d CamZ=%d",camera.position.x,
camera.position.y,camera.position.z);console.log("TarX=%d TarY=%d TarZ=%d",controls.target.x,controls.target.y,controls.target.z);console.log("dist=%d",distance);console.log("angelPlaneXZ=%d",angelPlaneXZ);console.log("angelOy=%d",angelOy);console.log("----------------------------")}btnTemp.addEventListener("click",showCameraParam);var width=640;var height=640;var aspect=1;width=window.innerWidth-0;height=window.innerHeight-0;aspect=width/height;var scene=new THREE.Scene;scene.background=new THREE.Color(16777215);
scene.fog=new THREE.Fog(scene.background,5E3,9E3);var camera=new THREE.PerspectiveCamera(35,aspect,100,9E3);var controls=new THREE.OrbitControls(camera);var cameraPosSetupDef={camLookAt:new THREE.Vector3(0,0,0),distance:1E4,angelPlaneXZ:0,angelOy:0,autoRotSpeed:-3};globalCameraPos(cameraPosSetupDef);controls.maxPolarAngle=Math.PI*.75;controls.noZoom=false;controls.zoomSpeed=.8;controls.autoRotate=false;controls.noRotate=false;controls.rotateSpeed=.8;controls.noPan=false;controls.keyPanSpeed=5;
dirLight=new THREE.DirectionalLight(16777215,1);dirLight.position.set(2,1.5,1.4);dirLight.position.multiplyScalar(1E3);scene.add(dirLight);hemiLight=new THREE.HemisphereLight(16777215,16777215,.9);hemiLight.color.setHSL(.6,1,.6);hemiLight.groundColor.setHSL(.095,1,.75);hemiLight.position.set(0,10,0);scene.add(hemiLight);var light=new THREE.PointLight(16777215,1.4,2E4,1);light.position.set(1500,1600,1E3);var sphereSize=100;var pointLightHelper=new THREE.PointLightHelper(light,sphereSize);
var light2=new THREE.PointLight(16777215,.4,2E4,1);light2.position.set(-1500,1800,-1E3);scene.add(light2);var canvas=document.getElementById("canvas-exemple");var renderer=new THREE.WebGLRenderer({canvas:canvas,antialias:true});renderer.setSize(window.innerWidth,window.innerHeight);renderer.setSize(width,height);renderer.gammaInput=true;renderer.gammaOutput=true;renderer.sortObjects=true;renderer.render(scene,camera);
function holodUst1Mode_1(){potok1.visible=!potok1.visible;potok1.children[0].children.sort(compareName);rekuperatorKorp.children[0].children.sort(compareName);for(var i=0;i<potok1.children[0].children.length;i++){if(i<81)potok1.children[0].children[i].material=matPotokRed;if(i>80&&i<81+21)potok1.children[0].children[i].material=matPotokPink;if(i>101&&i<101+26)potok1.children[0].children[i].material=matPotokDarkBlue;if(i>126&&i<126+19)potok1.children[0].children[i].material=matPotokBlue;if(i>145&&
i<145+46)potok1.children[0].children[i].material=matPotokPink;if(i>190)potok1.children[0].children[i].material=matPotokRed}if(potok1.visible){rama.children[0].children[1].visible=false;barashki.children[0].visible=false;rama.children[0].children[0].material=matGhost;ventilatorOutSide.rotSpeed=.1;ustVent1.rotSpeed=.1;ustVent2.rotSpeed=.1;rotateGroup3D(diffuzorLopasti.children[0].children,30,"oX");rotateGroup3D(zaslonka1.children[0].children,-90,"oZ");rotateGroup3D(zaslonka2.children[0].children,-90,
"oZ");rotateGroup3D(rekuperatorZaslon1.children[0].children,-90,"oX");rotateGroup3D(rekuperatorZaslon2.children[0].children,-90,"oX");rotateGroup3D(rekuperatorZaslon3.children[0].children,0,"oX")}else{rama.children[0].children[1].visible=true;barashki.children[0].visible=true;rama.children[0].children[0].material=matUstRama;ventilatorOutSide.rotSpeed=0;ustVent1.rotSpeed=0;ustVent2.rotSpeed=0;rotateGroup3D(diffuzorLopasti.children[0].children,0,"oX");rotateGroup3D(zaslonka1.children[0].children,0,
"oZ");rotateGroup3D(zaslonka2.children[0].children,0,"oZ");rotateGroup3D(rekuperatorZaslon1.children[0].children,0,"oX");rotateGroup3D(rekuperatorZaslon2.children[0].children,0,"oX");rotateGroup3D(rekuperatorZaslon3.children[0].children,-90,"oX")}}
function holodUst1Mode_2(){potok2.visible=!potok2.visible;potok2.children[0].children.sort(compareName);rekuperatorKorp.children[0].children.sort(compareName);for(var i=0;i<potok2.children[0].children.length;i++)if(i<152)potok2.children[0].children[i].material=matPotokPink;else potok2.children[0].children[i].material=matPotokRed;if(potok2.visible){rama.children[0].children[1].visible=false;barashki.children[0].visible=false;rama.children[0].children[0].material=matGhost;ventilatorOutSide.rotSpeed=
0;ustVent1.rotSpeed=.1;ustVent2.rotSpeed=0;rotateGroup3D(diffuzorLopasti.children[0].children,30,"oX");rotateGroup3D(zaslonka1.children[0].children,0,"oZ");rotateGroup3D(zaslonka2.children[0].children,0,"oZ");rotateGroup3D(rekuperatorZaslon1.children[0].children,0,"oX");rotateGroup3D(rekuperatorZaslon2.children[0].children,-90,"oX");rotateGroup3D(rekuperatorZaslon3.children[0].children,-90,"oX")}else{rama.children[0].children[1].visible=true;barashki.children[0].visible=true;rama.children[0].children[0].material=
matUstRama;ventilatorOutSide.rotSpeed=0;ustVent1.rotSpeed=0;ustVent2.rotSpeed=0;rotateGroup3D(diffuzorLopasti.children[0].children,0,"oX");rotateGroup3D(zaslonka1.children[0].children,0,"oZ");rotateGroup3D(zaslonka2.children[0].children,0,"oZ");rotateGroup3D(rekuperatorZaslon1.children[0].children,-90,"oX");rotateGroup3D(rekuperatorZaslon2.children[0].children,0,"oX");rotateGroup3D(rekuperatorZaslon3.children[0].children,0,"oX")}}
function animHolodUst1(){vent_nasos_ventil.rotation.z+=ustVent1.rotSpeed;vent_nasos_ventil2.rotation.z+=ustVent2.rotSpeed;ventilatorOutSide_lopasti.children[0].children[0].rotation.x+=ventilatorOutSide.rotSpeed;ventilatorOutSide_lopasti.children[0].children[1].rotation.x+=ventilatorOutSide.rotSpeed*1.02;ventilatorOutSide_lopasti.children[0].children[2].rotation.x-=ventilatorOutSide.rotSpeed*.8;ventilatorOutSide_lopasti.children[0].children[3].rotation.x-=ventilatorOutSide.rotSpeed*1.03;if(potok1.visible)for(var i=
0;i<potok1.children[0].children.length;i++)potok1.children[0].children[i].scale.y=potok1.children[0].children[i].scale.z=1-.99*(Math.sin(i/5-tick)+1);if(potok2.visible)for(var i$1=0;i$1<potok2.children[0].children.length;i$1++)potok2.children[0].children[i$1].scale.y=potok2.children[0].children[i$1].scale.z=1-.99*(Math.sin(i$1/5-tick)+1)}
function rotateGroup3D(group3DObject,rotateAngel,rotateAxis){if(rotateAxis=="oX")for(var i=0;i<group3DObject.length;i++)group3DObject[i].rotation.x=THREE.Math.degToRad(rotateAngel);if(rotateAxis=="oY")for(var i$2=0;i$2<group3DObject.length;i$2++)group3DObject[i$2].rotation.y=THREE.Math.degToRad(rotateAngel);if(rotateAxis=="oZ")for(var i$3=0;i$3<group3DObject.length;i$3++)group3DObject[i$3].rotation.z=THREE.Math.degToRad(rotateAngel)}scene.add(ustanovka);scene.add(potok1);scene.add(potok2);
function compareName(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;return 0}function setCamera(){rama.children[0].children[0].material=matUstRama;startCameraAnim(CameraKeyTrckDefPos)}btnRotateCamera.style.opacity=1;function toggleRotate(){controls.autoRotate=!controls.autoRotate;if(controls.autoRotate)btnRotateCamera.style.opacity=1;else btnRotateCamera.style.removeProperty("opacity")}function onCameraRotate(){controls.autoRotate=true;btnRotateCamera.style.opacity=1}
function offCameraRotate(){controls.autoRotate=false;btnRotateCamera.style.removeProperty("opacity")}function stopCameraAnim(){offCameraRotate();$("#textblock1").hide().empty();CameraKeyTrck.playOn=false;console.log("Anim stop");plyRed.style.display="none";potok1.visible=false;potok2.visible=false}function startCameraAnim(keyFrTrack){if(!CameraKeyTrck.playOn){offCameraRotate();CameraKeyTrck=keyFrTrack;CameraKeyTrck.playOn=true;return true}}var selectedObjectMode=false;
function selectObject(){selectedObjectMode=!selectedObjectMode;if(selectedObjectMode){rama.children[0].children[1].visible=false;btnSelectObject.style.opacity=1}else{rama.children[0].children[1].visible=true;btnSelectObject.style.removeProperty("opacity")}}function showGeneralInfo(){if(startCameraAnim(CameraKeyTrckAllPos)){plyRed.style.display="block";if(!potok1.visible)rama.children[0].children[0].material=matUstRama}}
function showDetailInfo(){if(startCameraAnim(CameraKeyTrck1)){plyRed.style.display="block";barashki.children[0].visible=false;rama.children[0].children[0].material=matGhost;rama.children[0].children[1].visible=false;vent_nasos_ventil.rotSpeed=.1;vent_nasos_ventil2.rotSpeed=.1}}function showHowItWork(){potok2.visible=false;offCameraRotate();startCameraAnim(CameraKeyTrckFrontPos);setTimeout(holodUst1Mode_1,400)}
function showHowItWork2(){potok1.visible=false;offCameraRotate();startCameraAnim(CameraKeyTrckFrontPos);setTimeout(holodUst1Mode_2,400)}function showHideBronya(){rama.children[0].children[1].visible=!rama.children[0].children[1].visible;barashki.children[0].visible=!barashki.children[0].visible}btnSelectObject.addEventListener("click",selectObject);btnShow2LevellInfo.addEventListener("click",showDetailInfo);btnShow1LevellInfo.addEventListener("click",showGeneralInfo);
btnShowHideBronya.addEventListener("click",showHideBronya);btnRotateCamera.addEventListener("click",toggleRotate);btnShowHowItWork.addEventListener("click",showHowItWork);btnShowHowItWork2.addEventListener("click",showHowItWork2);btnResetCemera.addEventListener("click",setCamera);btnStopAnim.addEventListener("click",stopCameraAnim);btnFullscrn.addEventListener("click",toggleFullScreen);document.addEventListener("keydown",function(e){if(e.keyCode==13)toggleFullScreen()},false);
window.addEventListener("resize",onWindowResize,false);function onWindowResize(event){width=window.innerWidth-0;height=window.innerHeight-0;aspect=width/height;renderer.setSize(width,height);camera.aspect=aspect;camera.updateProjectionMatrix();controls.rotateSpeed=width/1920}var mouseDownState=true;renderer.domElement.addEventListener("mousedown",function(){mouseDownState=false},false);renderer.domElement.addEventListener("mouseup",function(){mouseDownState=true},false);
var selectedObject={object:new THREE.Object3D,material:new THREE.MeshPhongMaterial};var raycaster=new THREE.Raycaster;renderer.domElement.addEventListener("mousemove",onDocumentMouseMove,false);
function onDocumentMouseMove(event){if(selectedObjectMode){var mouse=new THREE.Vector2;var intersects;event.preventDefault();mouse.x=event.clientX/window.innerWidth*2-1;mouse.y=-(event.clientY/window.innerHeight)*2+1;raycaster.setFromCamera(mouse,camera);intersects=raycaster.intersectObjects([scene],true);if(intersects.length>0&&mouseDownState){if(intersects[0].object.material!=matGhost){selectedObject.object.material=selectedObject.material;selectedObject.object=intersects[0].object;selectedObject.material=
intersects[0].object.material;intersects[0].object.material=matGhost;console.log(intersects[0].object.name)}}else if(intersects){selectedObject.object.material=selectedObject.material;intersects=null}}}
window.onload=function(){matHolodSetup();startCameraAnim(CameraKeyTrckDefPos);onCameraRotate();$("#controlPanel").css("display","flex").hide().delay(2E3).fadeIn(600);$("#cameraControl").css("display","flex").hide().delay(2E3).fadeIn(600);$("#copyRight").css("display","flex").hide().delay(4E3).fadeIn(600);$("#help1").delay(3E3).fadeIn(600).delay(8E3).fadeOut(600);rekuperatorKorp.children[0].children[0].material=matRekuperator;rekuperatorKorp.children[0].children[1].material=matSteel;rekuperatorKorp.children[0].children[2].material=
matSteel;rekuperatorKorp.children[0].children[3].material=matSteel};var animateCamera1=animateCamera();var tick=0;var CameraKeyTrck={playOn:false};var animate=function(){requestAnimationFrame(animate);tick+=.075;if(globalLoad>35){blockLoad.style.display="none";animateCamera1(CameraKeyTrck);animHolodUst1();controls.update();renderer.render(scene,camera)}else blockLoadProgress.style.width=50*(globalLoad+.9)/36+"vmax"};animate();
